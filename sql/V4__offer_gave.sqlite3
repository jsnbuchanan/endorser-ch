
CREATE TABLE offer_claim (
       jwtId TEXT PRIMARY KEY, -- initial declaration
       handleId TEXT,
       issuedAt DATE,

       -- note that did:peer are 58 chars
       offeredByDid TEXT, -- global ID of the offering entity (issuer if empty)
       recipientDid TEXT, -- global ID of recipient (if any)
       recipientPlanId TEXT, -- full ID of PlanAction (if any)

       amount REAL,
       unit TEXT,
       objectDescription TEXT,

       validThrough DATE,
       fullClaim TEXT -- full claim JSON
);

CREATE INDEX offer_handleId ON offer_claim(handleId);
CREATE INDEX offer_offeredByDid ON offer_claim(offeredByDid);
CREATE INDEX offer_recipientDid ON offer_claim(recipientDid);
CREATE INDEX offer_recipientPlanId ON offer_claim(recipientPlanId);
CREATE INDEX offer_validThrough ON offer_claim(validThrough);

CREATE TABLE give_claim (
       jwtId TEXT PRIMARY KEY, -- initial declaration
       handleId TEXT,
       issuedAt DATE,

       -- note that did:peer are 58 chars
       agentDid TEXT, -- global ID of the entity who gave the item

       recipientDId TEXT, -- global ID of recipient
       fulfillsId TEXT, -- global ID to which this applies
       fulfillsType TEXT, -- type of that ID (assuming in context schema.org)

       -- This plan ID is for the case where this is given to a broader plan
       -- that is nested inside the related data.
       fulfillsPlanId TEXT,

       amount REAL,
       unit TEXT,
       description TEXT,

       fullClaim TEXT -- full claim JSON
);

CREATE INDEX give_handleId ON give_claim(handleId);
CREATE INDEX give_agentDid ON give_claim(agentDid);
CREATE INDEX give_recipientDid ON give_claim(recipientDid);
CREATE INDEX give_fulfillsId ON give_claim(fulfillsId);
CREATE INDEX give_fulfillsPlanId ON give_claim(fulfillsPlanId);
